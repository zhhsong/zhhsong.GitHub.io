<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://zhhsong.GitHub.io</id>
    <title>Applied and Environmental Seismology Group</title>
    <updated>2020-09-04T14:50:24.032Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://zhhsong.GitHub.io"/>
    <link rel="self" href="https://zhhsong.GitHub.io/atom.xml"/>
    <subtitle>*****

</subtitle>
    <logo>https://zhhsong.GitHub.io/images/avatar.png</logo>
    <icon>https://zhhsong.GitHub.io/favicon.ico</icon>
    <rights>All rights reserved 2020, Applied and Environmental Seismology Group</rights>
    <entry>
        <title type="html"><![CDATA[下载PoroTomo主动源的地震仪数据]]></title>
        <id>https://zhhsong.GitHub.io/post/xia-zai-porotomo-zhu-dong-yuan-de-di-zhen-yi-shu-ju/</id>
        <link href="https://zhhsong.GitHub.io/post/xia-zai-porotomo-zhu-dong-yuan-de-di-zhen-yi-shu-ju/">
        </link>
        <updated>2020-09-04T14:42:55.000Z</updated>
        <content type="html"><![CDATA[<p>因PoroTomo主动源地震仪的数据分层较多，当需要下载多个事件多个地震仪记录时，直接在ftp中下载较为麻烦，因此通过以下脚本对其进行下载。<br>
关于PoroTomo其他数据的需求可以参考该程序进行修改。</p>
<pre><code>import urllib
import os
def download_file(url, destDir):
	urllib.request.urlretrieve(url, destDir)

def main(sweep_id, station, channel, filename = 'Nodal_data'):
    website = &quot;ftp://roftp.ssec.wisc.edu/porotomo/PoroTomo/DATA/NODAL_SAC_SWEEP/nodal_sac_files/&quot; 
    destDir = &quot;./&quot; + filename +'/'
    if os.path.exists(destDir)==False:
        os.mkdir(destDir)
    for i in range(len(sweep_id)):
        for j in range(len(station)):
            for k in range(len(channel)):
                url = website + sweep_id[i] +'/sac_files/'
                sacName = sweep_id[i] + '.PG.' + station[j] + '.EH' + channel[k] + '.298.sac' 
                url += sacName
                filePath = destDir + sacName
                download_file(url, filePath)
                print(&quot;sac file downloaded: &quot; + sacName)
    print(&quot;ALL Done！&quot;)
                
if __name__ == '__main__':
    SWEEP_ID = ['SWEEP_0183','SWEEP_0189']
    STATION = ['N225','N226','N227','N228','N197','N198','N199','N200','N201',\
               'N202','N203','N204','N205','N206','N207','N180','N181','N182',\
                   'N183','N184','N185','N164','N165','N166','N167','N168','N144',\
                       'N145','N146','N147','N148','N149']
    CHANNEL = ['E','N','Z']
    main(SWEEP_ID,STATION,CHANNEL)
</code></pre>
]]></content>
    </entry>
</feed>